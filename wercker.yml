box: node

# merge steps to optimize the use of wercker queue
build:
  steps:
    - npm-install
    - npm-test

publish:
  steps:
    - script:
        name: define version
        code: |
          APP_VERSION=v`node -e 'console.log(require("./package.json").version)'`
    - github-create-release:
        token: $GITHUB_TOKEN
        tag: $APP_VERSION
    - script:
        name: build pkg content
        code: |
          mkdir dist
          npm run build
          npm publish

